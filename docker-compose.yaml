services:
  voice-clone-studio:
    build:
      context: .
      args:
        CUDA_VERSION: cu128
    ports:
      - "7860:7860"
    volumes:
      # - .:/app # Removed full mount to use build-time copy of python files
      - ./samples:/app/samples
      - ./output:/app/output
      # Persist HuggingFace models
      - hf_cache:/root/.cache/huggingface
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    restart: unless-stopped
    stdin_open: true
    tty: true

volumes:
  hf_cache:
